(function(){var t,e;t=["angular","core/module","core/services/validate","core/services/invitationManager"],e=function(t){var e;return e=function($rootScope,$http,$timeout,$tooltip,invitationManager,validate,SERVER){return{restrict:"E",scope:{focusTrigger:"=manualFocus"},templateUrl:"partials/options/_inviter_input.html",link:function(t,e){return t.tooltipText="",t.tempInviter="",t.$watch("focusTrigger",function(r){var i;return r===!0?(i=e.children("form").children("input"),i[0].focus(),i[0].select(),t.focusTrigger=!1):void 0}),t.tooltipAlert=function(r){var i;return i=e.children("form").children("input"),t.myTooltip=$tooltip(i,{title:r,placement:"bottom",trigger:"manual"}),$timeout(function(){return t.myTooltip.show()},1),$timeout(function(){return t.myTooltip.hide()},3e3)},t.setInviter=function(){var e;return e=t.tempInviter.trim(),validate.email(e)||validate.phone(e)?$http({method:"POST",url:"https://"+SERVER+"/user/set_inviter",params:{inviter:e,sid:$rootScope.user.profile.sid},headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(r){return r.success?($rootScope.user.inviter=e,invitationManager.queryInviter(function(e){return t.$parent.inviter=e}),t.$parent.showInviterInput=!1):t.tooltipAlert(r.error)}):t.tooltipAlert("输入帐号不正确")}}}},t.module("core").directive("inviterInput",e)},define(t,e)}).call(this);